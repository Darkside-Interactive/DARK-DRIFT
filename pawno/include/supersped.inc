//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWW3D DRIFT SPEED BY LivingStonWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWW(vk.com/yaizlom)WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWW•11.02.2018•WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//==============================================================================
#include <a_samp>//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
#include <streamer>//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
#define function public//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
#define end return 0;}//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
#define tryone return 1;}//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
#define var new//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
var LodObj[MAX_PLAYERS][2];//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
var speedof[MAX_PLAYERS];//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
var speedon[MAX_PLAYERS];//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
var bool:UpdateSpeed[MAX_PLAYERS] = {false,...};//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
forward strtok(const string[],&index);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
strtok(const string[], &index){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
var length = strlen(string);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
while ((index < length) && (string[index] <= ' ')){//WWWWWWWWWWWWWWWWWWWWWWWWWWW
index++;}//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
var offset = index;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
var result[30];//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
while ((index < length) && (string[index] > ' ') && ((index - offset) < (sizeof(result) - 1))){
result[index - offset] = string[index];//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
index++;}//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
result[index - offset] = EOS;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
return result;}//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
function OnPlayerConnect(playerid){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
UpdateSpeed[playerid] = false;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
LodObj[playerid][0] = INVALID_OBJECT_ID;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
LodObj[playerid][1] = INVALID_OBJECT_ID;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
end//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
function OnPlayerDisconnect(playerid,reason){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
#pragma unused reason//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
if(LodObj[playerid][0] != INVALID_OBJECT_ID){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
DestroyDynamicObject(LodObj[playerid][0]);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
DestroyDynamicObject(LodObj[playerid][1]);}//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
end//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
function OnPlayerUpdate(playerid){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
if(UpdateSpeed[playerid]){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
var Float:p[3];//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
GetVehicleVelocity(GetPlayerVehicleID(playerid),p[0],p[1],p[2]);//WWWWWWWWWWWWWW
var str[12];//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
format(str,12,"%.0f KM/H",175.0*(p[0]*p[0]+p[1]*p[1]));//WWWWWWWWWWWWWWWWWWWWWWW
SetDynamicObjectMaterialText(LodObj[playerid][0],0,str,OBJECT_MATERIAL_SIZE_512x256,"Arial",64,true,0xFFFFFFFF,0,OBJECT_MATERIAL_TEXT_ALIGN_CENTER);}
tryone//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
function OnPlayerStateChange(playerid,newstate,oldstate){//WWWWWWWWWWWWWWWWWWWWW
if(newstate == PLAYER_STATE_DRIVER){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
LodObj[playerid][0] = CreateDynamicObject(19482,0.0,0.0,0.0,0.0,0.0,0.0,-1,-1,playerid,200.0);
LodObj[playerid][1] = CreateDynamicObject(19482,0.0,0.0,0.0,0.0,0.0,0.0,-1,-1,playerid,200.0);
var Float:x,Float:y,Float:z;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
GetVehicleModelInfo(GetVehicleModel(GetPlayerVehicleID(playerid)),VEHICLE_MODEL_INFO_SIZE,x,y,z);
AttachDynamicObjectToVehicle(LodObj[playerid][0],GetPlayerVehicleID(playerid),-x-0.5,0.0,z/2-0.3,0.0,0.0,270.0);
SetDynamicObjectMaterialText(LodObj[playerid][1],0,"_________",OBJECT_MATERIAL_SIZE_512x256,"Arial",64,true,0xFF4EFD71,0,OBJECT_MATERIAL_TEXT_ALIGN_CENTER);
AttachDynamicObjectToVehicle(LodObj[playerid][1],GetPlayerVehicleID(playerid),-x-0.5,0.0,z/2-0.3,0.0,0.0,270.0);
Streamer_Update(playerid);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
UpdateSpeed[playerid] = true;}//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
if(oldstate == PLAYER_STATE_DRIVER){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
UpdateSpeed[playerid] = false;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
DestroyDynamicObject(LodObj[playerid][0]);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
DestroyDynamicObject(LodObj[playerid][1]);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
LodObj[playerid][0] = INVALID_OBJECT_ID;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
LodObj[playerid][1] = INVALID_OBJECT_ID;}//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
end//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
function OnPlayerCommandText(playerid, cmdtext[]){//WWWWWWWWWWWWWWWWWWWWWWWWWWWW
var idx;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
idx = 0;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
var cmd[256];//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
cmd = strtok(cmdtext, idx);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
if(strcmp(cmd, "/3dof", true) == 0){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
if(speedof[playerid] == 1) return SendClientMessage(playerid, 0xFFFFFFFF, "{ff0000}• Nieaiiao? o?a ioee??ai • ");
DestroyDynamicObject(LodObj[playerid][0]);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
DestroyDynamicObject(LodObj[playerid][1]);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
speedof[playerid] = 1;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
SendClientMessage(playerid, 0xFFFFFFFF, "{00ff00}• Nieaiiao? Oniaoii ioee??ai • ");
tryone//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
if(strcmp(cmd, "/3don", true) == 0){//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
if(speedon[playerid] == 1) return SendClientMessage(playerid, 0xFFFFFFFF, "{ff0000}• Nieaiiao? o?a aee??ai • ");
new Float:x, Float:y, Float:z;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
GetPlayerPos(playerid, x, y, z);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
SetPlayerPos(playerid, x+3, y+3, z);//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
LodObj[playerid][0] = INVALID_OBJECT_ID;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
LodObj[playerid][1] = INVALID_OBJECT_ID;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
speedon[playerid] = 1;//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
SendClientMessage(playerid, 0xFFFFFFFF, "{00ff00}• Nieaiiao? Oniaoii aee??ai • ");
tryone//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
end//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
//WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW